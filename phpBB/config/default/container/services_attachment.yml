services:
    attachment.delete:
        class: phpbb\attachment\delete
        shared: false
        arguments:
            - '@config'
            - '@dbal.conn'
            - '@dispatcher'
            - '@attachment.resync'
            - '@storage.attachment'

    attachment.image_helper:
        class: phpbb\attachment\image_helper

    attachment.manager:
        class: phpbb\attachment\manager
        shared: false
        arguments:
            - '@attachment.delete'
            - '@attachment.resync'
            - '@attachment.upload'

    attachment.resync:
        class: phpbb\attachment\resync
        shared: false
        arguments:
            - '@dbal.conn'

    attachment.resize:
        class: phpbb\attachment\resize
        arguments:
            - '@filesystem'
            - '@attachment.image_helper'
            - '@php_ini'
            - '@upload_imagesize'

    attachment.resync:
        class: phpbb\attachment\resync
        scope: prototype
        arguments:
            - '@dbal.conn'

    attachment.thumbnail:
        class: phpbb\attachment\thumbnail
        arguments:
            - '@config'
            - '@attachment.resize'

    attachment.upload:
        class: phpbb\attachment\upload
        shared: false
        arguments:
            - '@auth'
            - '@cache'
            - '@config'
            - '@files.upload'
            - '@language'
            - '@mimetype.guesser'
            - '@dispatcher'
            - '@plupload'
            - '@storage.attachment'
            - '@filesystem.temp'
            - '@attachment.thumbnail'
            - '@user'
